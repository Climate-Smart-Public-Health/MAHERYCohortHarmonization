<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Preprocessing 2018 Health Status • MAHERYCohortHarmonization</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preprocessing 2018 Health Status">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MAHERYCohortHarmonization</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/opensrp-cohort-2018-preprocessing.html">OpenSRP Cohort 2018 Preprocessing</a></li>
    <li><a class="dropdown-item" href="../articles/OutputTables.html">Pipeline Outputs</a></li>
    <li><a class="dropdown-item" href="../articles/preprocessing-2018-health-status.html">Preprocessing 2018 Health Status</a></li>
    <li><a class="dropdown-item" href="../articles/preprocessing-2018-household-heads.html">Preprocessing 2018 Household Heads</a></li>
    <li><a class="dropdown-item" href="../articles/preprocessing-2019-health-status.html">Preprocessing 2019 Health Status</a></li>
    <li><a class="dropdown-item" href="../articles/preprocessing-dharma-2019-cohort.html">Preprocessing Dharma 2019 Cohort</a></li>
    <li><a class="dropdown-item" href="../articles/reporting-with-pins-and-google-drive.html">Reporting with pins and Google Drive</a></li>
    <li><a class="dropdown-item" href="../articles/tracking-input-data.html">Tracking Input Data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Preprocessing 2018 Health Status</h1>
            
      

      <div class="d-none name"><code>preprocessing-2018-health-status.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MAHERYCohortHarmonization</span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_preprocess_2018_health.Rmd: do not edit by hand -->
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; here() starts at /net/rcstorenfs02/ifs/rc_labs/dominici_lab/lab/data_processing/csph_MDG-SurveyHarmonization/MAHERYCohortHarmonization</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/targets/" class="external-link">targets</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_load.html" class="external-link">tar_load</a></span><span class="op">(</span><span class="va">opensrp</span>, store <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"_targets"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_load.html" class="external-link">tar_load</a></span><span class="op">(</span><span class="va">opensrp_dict</span>, store <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"_targets"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_load.html" class="external-link">tar_load</a></span><span class="op">(</span><span class="va">cohort_2018_deid</span>, store <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"_targets"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load already included functions if relevant</span></span>
<span><span class="fu">pkgload</span><span class="fu">::</span><span class="fu"><a href="https://pkgload.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span>export_all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">MAHERYCohortHarmonization</span></span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor" class="external-link">janitor</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'janitor'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     chisq.test, fisher.test</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:testthat':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     matches</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'tidyr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:testthat':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     matches</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'lubridate'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     date, intersect, setdiff, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/skimr/" class="external-link">skimr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'skimr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:testthat':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     matches</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/" class="external-link">forcats</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span></code></pre></div>
<p>In this notebook we’re tackling the health data from the cohort 2018
opensrp file. We decided to leave this to a separate processing step
because the health data is a bit more complex than the household
registration and demographic data.</p>
<p>Let’s begin:</p>
<div class="section level3">
<h3 id="reading-in-the-data">Reading in the data<a class="anchor" aria-label="anchor" href="#reading-in-the-data"></a>
</h3>
<p>The data is read in from the targets pipeline, and is contained in
the <code>opensrp</code> object.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census</span> <span class="op">&lt;-</span> <span class="va">opensrp</span><span class="op">$</span><span class="va">`Open census`</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">open_census</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 46</span></span></span>
<span><span class="co">#&gt;   `User Id`   `Hh Head Name` Id        Member `Name Family Member` `Date Census`</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Antaravato1 Alexis         Dd388725… Efd71… Alda alexina         2017-07-31   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Antaravato1 Alexis         Dd388725… B1f1a… Alexis               2017-07-31   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Antaravato1 Alexis         Dd388725… C3420… Be leonnette         2017-07-31   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Antaravato1 Alexis         Dd388725… 4a4e9… Lalatina anick deli… 2017-07-31   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Antaravato1 Alexis         Dd388725… Fa132… Rakotonirina alex    2017-07-31   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Antaravato1 Alexis         Dd388725… B928f… Tendry andrex golden 2017-07-31   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 40 more variables: `Dob Actual` &lt;chr&gt;, `Dob Date` &lt;chr&gt;, `Dob Month` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Dob Year` &lt;chr&gt;, `Ethnic Group` &lt;chr&gt;, `Other Ethnic Group` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Sex &lt;chr&gt;, Education &lt;chr&gt;, Profession &lt;chr&gt;, `Profession Choices` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Other Profession` &lt;chr&gt;, `Marital Status` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Prior Health Care` &lt;chr&gt;, `Prior Diagnosis` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Other Prior Diagnosis` &lt;chr&gt;, `Visual Health Deformities` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Other Visual Health Deformities` &lt;chr&gt;, Surgeries &lt;chr&gt;, …</span></span></span></code></pre></div>
<p>In this <em>specific case</em>, the raw data in the open census file
is the same number of rows as the processed targets output, so I’m going
to join the raw data to the health columns.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># remove this individual as they are specifically excluded from the cohort as a duplicate</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">member</span>, <span class="st">"36841201"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">prior_health_care</span><span class="op">:</span><span class="va">deathyear</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">cohort_2018_deid</span>, uuid_clean <span class="op">=</span> <span class="va">uuid</span>, sex_clean <span class="op">=</span> <span class="va">sex</span>, age_group_clean <span class="op">=</span> <span class="va">age_group</span><span class="op">)</span>, <span class="va">.</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">health_data</span></span></code></pre></div>
<p>Now let’s take a look at the data:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">skimr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html" class="external-link">skim</a></span><span class="op">(</span><span class="va">health_data</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">health_data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">549</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">25</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">20</td>
</tr>
<tr class="odd">
<td align="left">factor</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="35%">
<col width="11%">
<col width="15%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="10%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">uuid_clean</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">549</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">prior_health_care</td>
<td align="right">313</td>
<td align="right">0.43</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">prior_diagnosis</td>
<td align="right">466</td>
<td align="right">0.15</td>
<td align="right">3</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">11</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">other_prior_diagnosis</td>
<td align="right">513</td>
<td align="right">0.07</td>
<td align="right">3</td>
<td align="right">20</td>
<td align="right">0</td>
<td align="right">19</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">visual_health_deformities</td>
<td align="right">308</td>
<td align="right">0.44</td>
<td align="right">8</td>
<td align="right">31</td>
<td align="right">0</td>
<td align="right">7</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">other_visual_health_deformities</td>
<td align="right">544</td>
<td align="right">0.01</td>
<td align="right">6</td>
<td align="right">25</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">surgeries</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">prior_surgeries</td>
<td align="right">537</td>
<td align="right">0.02</td>
<td align="right">1</td>
<td align="right">52</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">vaccine_card</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">vaccination_history</td>
<td align="right">141</td>
<td align="right">0.74</td>
<td align="right">5</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">14</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">vaccine_other</td>
<td align="right">232</td>
<td align="right">0.58</td>
<td align="right">1</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pregnant</td>
<td align="right">319</td>
<td align="right">0.42</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pregnancies</td>
<td align="right">417</td>
<td align="right">0.24</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">number_deliveries</td>
<td align="right">418</td>
<td align="right">0.24</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">number_live_births</td>
<td align="right">419</td>
<td align="right">0.24</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">11</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">birthweight</td>
<td align="right">180</td>
<td align="right">0.67</td>
<td align="right">14</td>
<td align="right">17</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">birthweight_gram</td>
<td align="right">501</td>
<td align="right">0.09</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">15</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">is_person_alive</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">deathmonth</td>
<td align="right">236</td>
<td align="right">0.57</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">deathyear</td>
<td align="right">236</td>
<td align="right">0.57</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table">
<colgroup>
<col width="17%">
<col width="10%">
<col width="15%">
<col width="8%">
<col width="9%">
<col width="38%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sex_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">fem: 280, mal: 269</td>
</tr>
<tr class="even">
<td align="left">age_group_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">8</td>
<td align="left">25–: 210, 10–: 74, 20–: 70, 50–: 64</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cause_of_death</td>
<td align="right">549</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="even">
<td align="left">date_of_death</td>
<td align="right">549</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="odd">
<td align="left">death_date</td>
<td align="right">549</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="health-care-access-diagnoses">Health Care Access &amp; Diagnoses<a class="anchor" aria-label="anchor" href="#health-care-access-diagnoses"></a>
</h3>
<p>The first thing to determine is whether
<code>prior_health_care</code> refers to, “does this person have a
history of a health care condition,” or something else.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">prior_health_care</span>, <span class="va">prior_diagnosis</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  prior_diagnosis</span></span>
<span><span class="co">#&gt; prior_health_care Hypertension Hypertension idr Idr</span></span>
<span><span class="co">#&gt;               No             0                0   0</span></span>
<span><span class="co">#&gt;               Yes            3                1   2</span></span>
<span><span class="co">#&gt;                  prior_diagnosis</span></span>
<span><span class="co">#&gt; prior_health_care Infected wound prior diagnosis other Malaria Malaria cancer</span></span>
<span><span class="co">#&gt;               No                                     0       0              0</span></span>
<span><span class="co">#&gt;               Yes                                    1      34              1</span></span>
<span><span class="co">#&gt;                  prior_diagnosis</span></span>
<span><span class="co">#&gt; prior_health_care Malaria prior diagnosis other No diagnosis No pregnancy</span></span>
<span><span class="co">#&gt;               No                              0            0            0</span></span>
<span><span class="co">#&gt;               Yes                             2            2            5</span></span>
<span><span class="co">#&gt;                  prior_diagnosis</span></span>
<span><span class="co">#&gt; prior_health_care Prior diagnosis other Tuberculosis</span></span>
<span><span class="co">#&gt;               No                      0            0</span></span>
<span><span class="co">#&gt;               Yes                    21            1</span></span></code></pre></div>
<p>From this it would appear that prior healthcare is a yes/no question
that tells us if they have any history of health care conditions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>prior_health_condition_clean <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">prior_health_care</span> <span class="op">==</span> <span class="st">"Yes"</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">prior_diagnosis</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"No"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">health_data_</span></span></code></pre></div>
<p>Now let’s look at the <code>prior_diagnosis</code> column:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">prior_diagnosis</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; prior_diagnosis</span></span>
<span><span class="co">#&gt;                         Hypertension                     Hypertension idr </span></span>
<span><span class="co">#&gt;                                   13                                    1 </span></span>
<span><span class="co">#&gt;                                  Idr Infected wound prior diagnosis other </span></span>
<span><span class="co">#&gt;                                    2                                    1 </span></span>
<span><span class="co">#&gt;                              Malaria                       Malaria cancer </span></span>
<span><span class="co">#&gt;                                   34                                    1 </span></span>
<span><span class="co">#&gt;        Malaria prior diagnosis other                         No diagnosis </span></span>
<span><span class="co">#&gt;                                    2                                    2 </span></span>
<span><span class="co">#&gt;                         No pregnancy                Prior diagnosis other </span></span>
<span><span class="co">#&gt;                                    5                                   21 </span></span>
<span><span class="co">#&gt;                         Tuberculosis </span></span>
<span><span class="co">#&gt;                                    1</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">other_prior_diagnosis</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; other_prior_diagnosis</span></span>
<span><span class="co">#&gt;                  999          Adetin kibo        Aretim bavony </span></span>
<span><span class="co">#&gt;                    8                    1                    1 </span></span>
<span><span class="co">#&gt;        Aretintsofina              Bongabe             Farasisa </span></span>
<span><span class="co">#&gt;                    2                    1                    2 </span></span>
<span><span class="co">#&gt;               Hernie        Hoditra fotsy   Mangoraka, tadigny </span></span>
<span><span class="co">#&gt;                    2                    1                    1 </span></span>
<span><span class="co">#&gt;     Matetika tontona Mentally handicapped               Sohiky </span></span>
<span><span class="co">#&gt;                    1                    1                    2 </span></span>
<span><span class="co">#&gt;                Soiky             Solopiso              Tadigny </span></span>
<span><span class="co">#&gt;                    1                    6                    1 </span></span>
<span><span class="co">#&gt;              Tontona          Torantorana       Voatombo komby </span></span>
<span><span class="co">#&gt;                    1                    2                    1 </span></span>
<span><span class="co">#&gt;     Zonisy, farasisa </span></span>
<span><span class="co">#&gt;                    1</span></span></code></pre></div>
<p>In the secondary column, we see many values that are translated.
We’ll translate these manually and then cast them width wise to create a
wide format table.</p>
<p>First, we mutate the <code>prior_diagnosis</code> column to make sure
a diagnosis is one word, or clearly separated by a comma:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    prior_diagnosis_ <span class="op">=</span></span>
<span>      <span class="va">prior_diagnosis</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"infected wound prior diagnosis other"</span>, <span class="st">"infected_wound"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"malaria cancer"</span>, <span class="st">"malaria,cancer"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"malaria prior diagnosis other"</span>, <span class="st">"malaria"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no pregnancy prior diagnosis other"</span>, <span class="st">"no_pregnancy"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no pregnancy"</span>, <span class="st">"no_pregnancy"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"prior diagnosis other"</span>, <span class="st">"other"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"hypertension idr"</span>, <span class="st">"hypertension"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no diagnosis"</span>, <span class="cn">NA_character_</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"idr"</span>, <span class="cn">NA_character_</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">prior_diagnosis_</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; prior_diagnosis_</span></span>
<span><span class="co">#&gt;   hypertension infected_wound        malaria malaria,cancer   no_pregnancy </span></span>
<span><span class="co">#&gt;             14              1             36              1              5 </span></span>
<span><span class="co">#&gt;          other   tuberculosis </span></span>
<span><span class="co">#&gt;             21              1</span></span></code></pre></div>
<p>Then, we concatenate the <code>prior_diagnosis</code> and
<code>other_prior_diagnosis</code> columns to create a single diagnosis
column separated by commas:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    prior_diagnosis_ <span class="op">=</span></span>
<span>      <span class="va">prior_diagnosis</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"infected wound prior diagnosis other"</span>, <span class="st">"infected_wound"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"malaria cancer"</span>, <span class="st">"malaria,cancer"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"malaria prior diagnosis other"</span>, <span class="st">"malaria"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no pregnancy prior diagnosis other"</span>, <span class="st">"no_pregnancy"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no pregnancy"</span>, <span class="st">"no_pregnancy"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"prior diagnosis other"</span>, <span class="st">"other"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"hypertension idr"</span>, <span class="st">"hypertension"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no diagnosis"</span>, <span class="cn">NA_character_</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"idr"</span>, <span class="cn">NA_character_</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    other_prior_diagnosis <span class="op">=</span></span>
<span>      <span class="va">other_prior_diagnosis</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"infected wound prior diagnosis other"</span>, <span class="st">"infected_wound"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"malaria cancer"</span>, <span class="st">"malaria,cancer"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"malaria prior diagnosis other"</span>, <span class="st">"malaria"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no pregnancy prior diagnosis other"</span>, <span class="st">"no_pregnancy"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no pregnancy"</span>, <span class="st">"no_pregnancy"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"prior diagnosis other"</span>, <span class="st">"other"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"hypertension idr"</span>, <span class="st">"hypertension"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"no diagnosis"</span>, <span class="cn">NA_character_</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"idr"</span>, <span class="cn">NA_character_</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unite.html" class="external-link">unite</a></span><span class="op">(</span><span class="va">diagnoses_all</span>, <span class="va">prior_diagnosis_</span>, <span class="va">other_prior_diagnosis</span>, sep <span class="op">=</span> <span class="st">","</span>, remove <span class="op">=</span> <span class="cn">FALSE</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    diagnoses_all <span class="op">=</span></span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html" class="external-link">str_squish</a></span><span class="op">(</span><span class="va">diagnoses_all</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">", "</span>, <span class="st">","</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">" "</span>, <span class="st">"_"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="co"># if it just starts with "other," it means it has only "other diagnosis"</span></span>
<span>        <span class="co"># and can be safely removed</span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"^other,"</span>, <span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="co"># which means the ones that are 999 are true "other" diagnoses</span></span>
<span>        <span class="co"># with no specification in english</span></span>
<span>        <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="st">"999"</span>, <span class="st">"other_unspecified"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>diagnoses_all <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/na_if.html" class="external-link">na_if</a></span><span class="op">(</span><span class="va">diagnoses_all</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">diagnoses_all</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; diagnoses_all</span></span>
<span><span class="co">#&gt;           aretim_bavony           aretintsofina                 bongabe </span></span>
<span><span class="co">#&gt;                       1                       2                       1 </span></span>
<span><span class="co">#&gt;                farasisa                  hernie           hoditra_fotsy </span></span>
<span><span class="co">#&gt;                       2                       2                       1 </span></span>
<span><span class="co">#&gt;            hypertension infected_wound,solopiso                 malaria </span></span>
<span><span class="co">#&gt;                      14                       1                      34 </span></span>
<span><span class="co">#&gt;     malaria,adetin_kibo          malaria,cancer  malaria,voatombo_komby </span></span>
<span><span class="co">#&gt;                       1                       1                       1 </span></span>
<span><span class="co">#&gt;       mangoraka,tadigny        matetika_tontona    mentally_handicapped </span></span>
<span><span class="co">#&gt;                       1                       1                       1 </span></span>
<span><span class="co">#&gt;            no_pregnancy       other_unspecified                  sohiky </span></span>
<span><span class="co">#&gt;                       5                       8                       2 </span></span>
<span><span class="co">#&gt;                   soiky                solopiso                 tadigny </span></span>
<span><span class="co">#&gt;                       1                       5                       1 </span></span>
<span><span class="co">#&gt;                 tontona             torantorana            tuberculosis </span></span>
<span><span class="co">#&gt;                       1                       2                       1 </span></span>
<span><span class="co">#&gt;         zonisy,farasisa </span></span>
<span><span class="co">#&gt;                       1</span></span></code></pre></div>
<p>Now we have a single column with all diagnoses separated by a comma.
We can use this to create a wide format table with each diagnosis as a
column.</p>
<p>These values can then be translated and categorised into ICD10
categories, which might be useful for cross-cultural comparisons and
publications.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">malagasy_diagnosis_lookup_table</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">raw</span>, <span class="op">~</span><span class="va">diagnosis_english</span>, <span class="op">~</span><span class="va">icd10_code</span>, <span class="op">~</span><span class="va">icd10_description</span>,</span>
<span>  <span class="st">"aretim_bavony"</span>, <span class="st">"stomach_ache"</span>, <span class="st">"R10–R19"</span>, <span class="st">"Symptoms and signs involving the digestive system and abdomen"</span>,</span>
<span>  <span class="st">"adetin_kibo"</span>, <span class="st">"diarrhea"</span>, <span class="st">"R10–R19"</span>, <span class="st">"Symptoms and signs involving the digestive system and abdomen"</span>,</span>
<span>  <span class="st">"farasisa"</span>, <span class="st">"heel_fissures"</span>, <span class="st">"L80–L99"</span>, <span class="st">"Other disorders of the skin and subcutaneous tissue"</span>,</span>
<span>  <span class="st">"hernie"</span>, <span class="st">"hernia_prolapse"</span>, <span class="st">"K40–K46"</span>, <span class="st">"Hernia"</span>,</span>
<span>  <span class="st">"voatombo_komby"</span>, <span class="st">"injury_by_animal_zebu"</span>, <span class="st">"W50–W64"</span>, <span class="st">"Exposure to animate mechanical forces"</span>,</span>
<span>  <span class="st">"zonisy"</span>, <span class="st">"jaundice"</span>, <span class="st">"R10–R19"</span>, <span class="st">"Symptoms and signs involving the digestive system and abdomen"</span>,</span>
<span>  <span class="st">"aretintsofina"</span>, <span class="st">"ear_nose_throat"</span>, <span class="st">"H60–H95"</span>, <span class="st">"Diseases of the ear and mastoid process"</span>,</span>
<span>  <span class="st">"hoditra_fotsy"</span>, <span class="st">"genetic_albinism"</span>, <span class="st">"E70–E90"</span>, <span class="st">"Metabolic disorders"</span>,</span>
<span>  <span class="st">"solopiso"</span>, <span class="st">"syphilis_sti"</span>, <span class="st">"A50–A64"</span>, <span class="st">"Infections with a predominantly sexual mode of transmission"</span>,</span>
<span>  <span class="st">"mentally_handicapped"</span>, <span class="st">"developmental_cognitive"</span>, <span class="st">"F70–F79"</span>, <span class="st">"Intellectual disabilities"</span>,</span>
<span>  <span class="st">"bongabe"</span>, <span class="st">"big_testicles"</span>, <span class="st">"N40–N51"</span>, <span class="st">"Diseases of male genital organs"</span>,</span>
<span>  <span class="st">"mangoraka"</span>, <span class="st">"shivering_trembling"</span>, <span class="st">"R20–R29"</span>, <span class="st">"Symptoms and signs involving the nervous and musculoskeletal systems"</span>,</span>
<span>  <span class="st">"tadigny"</span>, <span class="st">"ear_ache"</span>, <span class="st">"H60–H95"</span>, <span class="st">"Diseases of the ear and mastoid process"</span>,</span>
<span>  <span class="st">"matetika_tontona"</span>, <span class="st">"epistaxis_nosebleed"</span>, <span class="st">"R00–R09"</span>, <span class="st">"Symptoms and signs involving the circulatory and respiratory systems"</span>,</span>
<span>  <span class="st">"tontona"</span>, <span class="st">"epistaxis_nosebleed"</span>, <span class="st">"R00–R09"</span>, <span class="st">"Symptoms and signs involving the circulatory and respiratory systems"</span>,</span>
<span>  <span class="st">"sohiky"</span>, <span class="st">"asthma"</span>, <span class="st">"J40–J47"</span>, <span class="st">"Chronic lower respiratory diseases"</span>,</span>
<span>  <span class="st">"soiky"</span>, <span class="st">"asthma"</span>, <span class="st">"J40–J47"</span>, <span class="st">"Chronic lower respiratory diseases"</span>,</span>
<span>  <span class="st">"torantorana"</span>, <span class="st">"dizziness_syncope"</span>, <span class="st">"R40–R46"</span>, <span class="st">"Symptoms and signs involving cognition, perception, emotional state and behavior"</span>,</span>
<span>  <span class="st">"hypertension"</span>, <span class="st">"hypertension"</span>, <span class="st">"I10–I15"</span>, <span class="st">"Hypertensive diseases"</span>,</span>
<span>  <span class="st">"malaria"</span>, <span class="st">"malaria"</span>, <span class="st">"B50–B64"</span>, <span class="st">"Protozoal diseases"</span>,</span>
<span>  <span class="st">"tuberculosis"</span>, <span class="st">"tuberculosis"</span>, <span class="st">"A15–A19"</span>, <span class="st">"Tuberculosis"</span>,</span>
<span>  <span class="st">"infected_wound"</span>, <span class="st">"skin_soft_tissue_infection"</span>, <span class="st">"L00–L08"</span>, <span class="st">"Infections of the skin and subcutaneous tissue"</span>,</span>
<span>  <span class="st">"no_pregnancy"</span>, <span class="st">"pregnancy_related"</span>, <span class="st">"O00–O99"</span>, <span class="st">"Pregnancy, childbirth and the puerperium"</span>,</span>
<span>  <span class="st">"cancer"</span>, <span class="st">"neoplasm_unspecified"</span>, <span class="st">"C00–D48"</span>, <span class="st">"Neoplasms"</span>,</span>
<span>  <span class="st">"other"</span>, <span class="st">"other_unknown"</span>, <span class="st">"R00–R99"</span>, <span class="st">"Symptoms, signs and abnormal clinical and laboratory findings, not elsewhere classified"</span>,</span>
<span>  <span class="st">"tazo_moko_tdr"</span>, <span class="st">"malaria_rdt_positive"</span>, <span class="st">"B50–B64"</span>, <span class="st">"Protozoal diseases"</span>,</span>
<span>  <span class="st">"pnemonia"</span>, <span class="st">"pneumonia"</span>, <span class="st">"J12–J18"</span>, <span class="st">"Pneumonia"</span>,</span>
<span>  <span class="st">"raboka_na_toberikilaozy"</span>, <span class="st">"cough_or_tuberculosis"</span>, <span class="st">"A15–A19"</span>, <span class="st">"Tuberculosis"</span>,</span>
<span>  <span class="st">"vih"</span>, <span class="st">"hiv"</span>, <span class="st">"B20–B24"</span>, <span class="st">"Human immunodeficiency virus [HIV] disease"</span>,</span>
<span>  <span class="st">"kisoso_na_kitrotro"</span>, <span class="st">"measles_or_whooping_cough"</span>, <span class="st">"B05–B06"</span>, <span class="st">"Measles and Rubella"</span>,</span>
<span>  <span class="st">"fery_misy_mamory_nana_ka_tsy_maintsy_ilaina_antibiotic_na_ilaina_fanapahana_rantsana"</span>, <span class="st">"abscess_needs_antibiotic_or_amputation"</span>, <span class="st">"L00–L08"</span>, <span class="st">"Infections of the skin and subcutaneous tissue"</span>,</span>
<span>  <span class="st">"fahatsetsemanny_lalan_dra_anaty_loha"</span>, <span class="st">"stroke"</span>, <span class="st">"I60–I69"</span>, <span class="st">"Cerebrovascular diseases"</span>,</span>
<span>  <span class="st">"fanintona"</span>, <span class="st">"seizure"</span>, <span class="st">"G40–G41"</span>, <span class="st">"Epilepsy and status epilepticus"</span>,</span>
<span>  <span class="st">"olana_eo_aminny_fitomboana"</span>, <span class="st">"growth_problem"</span>, <span class="st">"E00–E35"</span>, <span class="st">"Disorders of endocrine glands (includes growth disorders)"</span>,</span>
<span>  <span class="st">"fahajambana"</span>, <span class="st">"blindness"</span>, <span class="st">"H54"</span>, <span class="st">"Blindness and low vision"</span>,</span>
<span>  <span class="st">"olana_aminny_fandrenesana_avy_aminny_tadiny"</span>, <span class="st">"hearing_problem_eardrum"</span>, <span class="st">"H60–H95"</span>, <span class="st">"Diseases of the ear and mastoid process"</span>,</span>
<span>  <span class="st">"tosi_dra_ambony"</span>, <span class="st">"hypertension"</span>, <span class="st">"I10–I15"</span>, <span class="st">"Hypertensive diseases"</span>,</span>
<span>  <span class="st">"omamiadana_na_kansera"</span>, <span class="st">"cancer"</span>, <span class="st">"C00–D48"</span>, <span class="st">"Neoplasms"</span>,</span>
<span>  <span class="st">"olana_eo_aminny_ftondrana_vohoka_na_rehefa_be_kibo"</span>, <span class="st">"pregnancy_complication"</span>, <span class="st">"O00–O99"</span>, <span class="st">"Pregnancy, childbirth and the puerperium"</span>,</span>
<span>  <span class="st">"bilarziozy"</span>, <span class="st">"bilharzia"</span>, <span class="st">"B65"</span>, <span class="st">"Schistosomiasis (Bilharziasis)"</span>,</span>
<span>  <span class="st">"kakana_anaty_tsinay"</span>, <span class="st">"intestinal_worms"</span>, <span class="st">"B65–B83"</span>, <span class="st">"Helminthiases"</span>,</span>
<span>  <span class="st">"aretinny_mahaviavy_azo_avy_aminny_otrikaretina"</span>, <span class="st">"sexually_transmitted_infection"</span>, <span class="st">"A50–A64"</span>, <span class="st">"Infections with a predominantly sexual mode of transmission"</span>,</span>
<span>  <span class="st">"tsy_misy_aretina"</span>, <span class="st">"no_illness"</span>, <span class="st">"Z00–Z99"</span>, <span class="st">"Factors influencing health status and contact with health services"</span>,</span>
<span>  <span class="st">"hafa"</span>, <span class="st">"other"</span>, <span class="st">"R00–R99"</span>, <span class="st">"Symptoms, signs and abnormal clinical and laboratory findings, not elsewhere classified"</span>,</span>
<span>  <span class="st">"tsy_tadidy"</span>, <span class="st">"not_remembered"</span>, <span class="st">"R69"</span>, <span class="st">"Illness, unspecified"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Save to package</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">use_data</a></span><span class="op">(</span><span class="va">malagasy_diagnosis_lookup_table</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Setting active project to</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"/net/rcstorenfs02/ifs/rc_labs/dominici_lab/lab/data_processing/csph_MDG-SurveyHarmonization/MAHERYCohortHarmonization"</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Saving <span style="color: #0000BB;">"malagasy_diagnosis_lookup_table"</span> to</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"data/malagasy_diagnosis_lookup_table.rda"</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">☐</span> Document your data (see <span style="color: #0000BB; font-style: italic;">&lt;https://r-pkgs.org/data.html&gt;</span>).</span></span></code></pre></div>
<p>You can examine this lookup table in the vignette <a href="OutputTables.html"><code>Pipeline Outputs</code></a>.</p>
<p>With that, we can implement it in the function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/create_health_diagnoses.html">create_health_diagnoses</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">health_data_</span></span>
<span></span>
<span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   uuid_clean         sex_clean   age_group_clean prior_health_care </span></span>
<span><span class="co">#&gt;  Length:549         female:280   25–49  :210     Length:549        </span></span>
<span><span class="co">#&gt;  Class :character   male  :269   10–14  : 74     Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character                20–24  : 70     Mode  :character  </span></span>
<span><span class="co">#&gt;                                  50–64  : 64                       </span></span>
<span><span class="co">#&gt;                                  15–19  : 57                       </span></span>
<span><span class="co">#&gt;                                  5–9    : 46                       </span></span>
<span><span class="co">#&gt;                                  (Other): 28                       </span></span>
<span><span class="co">#&gt;  prior_diagnosis    other_prior_diagnosis visual_health_deformities</span></span>
<span><span class="co">#&gt;  Length:549         Length:549            Length:549               </span></span>
<span><span class="co">#&gt;  Class :character   Class :character      Class :character         </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character      Mode  :character         </span></span>
<span><span class="co">#&gt;                                                                    </span></span>
<span><span class="co">#&gt;                                                                    </span></span>
<span><span class="co">#&gt;                                                                    </span></span>
<span><span class="co">#&gt;                                                                    </span></span>
<span><span class="co">#&gt;  other_visual_health_deformities  surgeries         prior_surgeries   </span></span>
<span><span class="co">#&gt;  Length:549                      Length:549         Length:549        </span></span>
<span><span class="co">#&gt;  Class :character                Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character                Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;  vaccine_card       vaccination_history vaccine_other        pregnant        </span></span>
<span><span class="co">#&gt;  Length:549         Length:549          Length:549         Length:549        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character    Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character    Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                                              </span></span>
<span><span class="co">#&gt;                                                                              </span></span>
<span><span class="co">#&gt;                                                                              </span></span>
<span><span class="co">#&gt;                                                                              </span></span>
<span><span class="co">#&gt;  pregnancies        number_deliveries  number_live_births birthweight       </span></span>
<span><span class="co">#&gt;  Length:549         Length:549         Length:549         Length:549        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;  birthweight_gram   is_person_alive    cause_of_death date_of_death </span></span>
<span><span class="co">#&gt;  Length:549         Length:549         Mode:logical   Mode:logical  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   NA's:549       NA's:549      </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character                                </span></span>
<span><span class="co">#&gt;                                                                     </span></span>
<span><span class="co">#&gt;                                                                     </span></span>
<span><span class="co">#&gt;                                                                     </span></span>
<span><span class="co">#&gt;                                                                     </span></span>
<span><span class="co">#&gt;  death_date      deathmonth         deathyear        </span></span>
<span><span class="co">#&gt;  Mode:logical   Length:549         Length:549        </span></span>
<span><span class="co">#&gt;  NA's:549       Class :character   Class :character  </span></span>
<span><span class="co">#&gt;                 Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;  prior_health_condition_clean diagnosis_english_clean</span></span>
<span><span class="co">#&gt;  Length:549                   Length:549             </span></span>
<span><span class="co">#&gt;  Class :character             Class :character       </span></span>
<span><span class="co">#&gt;  Mode  :character             Mode  :character       </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;  diagnosis_icd10_code_clean diag_hypertension_clean diag_malaria_clean</span></span>
<span><span class="co">#&gt;  Length:549                 Mode :logical           Mode :logical     </span></span>
<span><span class="co">#&gt;  Class :character           FALSE:69                FALSE:46          </span></span>
<span><span class="co">#&gt;  Mode  :character           TRUE :14                TRUE :37          </span></span>
<span><span class="co">#&gt;                             NA's :466               NA's :466         </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;                                                                       </span></span>
<span><span class="co">#&gt;  diag_pregnancy_related_clean diag_developmental_cognitive_clean</span></span>
<span><span class="co">#&gt;  Mode :logical                Mode :logical                     </span></span>
<span><span class="co">#&gt;  FALSE:78                     FALSE:82                          </span></span>
<span><span class="co">#&gt;  TRUE :5                      TRUE :1                           </span></span>
<span><span class="co">#&gt;  NA's :466                    NA's :466                         </span></span>
<span><span class="co">#&gt;                                                                 </span></span>
<span><span class="co">#&gt;                                                                 </span></span>
<span><span class="co">#&gt;                                                                 </span></span>
<span><span class="co">#&gt;  diag_shivering_trembling_clean diag_ear_ache_clean diag_ear_nose_throat_clean</span></span>
<span><span class="co">#&gt;  Mode :logical                  Mode :logical       Mode :logical             </span></span>
<span><span class="co">#&gt;  FALSE:82                       FALSE:81            FALSE:81                  </span></span>
<span><span class="co">#&gt;  TRUE :1                        TRUE :2             TRUE :2                   </span></span>
<span><span class="co">#&gt;  NA's :466                      NA's :466           NA's :466                 </span></span>
<span><span class="co">#&gt;                                                                               </span></span>
<span><span class="co">#&gt;                                                                               </span></span>
<span><span class="co">#&gt;                                                                               </span></span>
<span><span class="co">#&gt;  diag_asthma_clean diag_jaundice_clean diag_heel_fissures_clean</span></span>
<span><span class="co">#&gt;  Mode :logical     Mode :logical       Mode :logical           </span></span>
<span><span class="co">#&gt;  FALSE:80          FALSE:82            FALSE:80                </span></span>
<span><span class="co">#&gt;  TRUE :3           TRUE :1             TRUE :3                 </span></span>
<span><span class="co">#&gt;  NA's :466         NA's :466           NA's :466               </span></span>
<span><span class="co">#&gt;                                                                </span></span>
<span><span class="co">#&gt;                                                                </span></span>
<span><span class="co">#&gt;                                                                </span></span>
<span><span class="co">#&gt;  diag_hernia_prolapse_clean diag_dizziness_syncope_clean</span></span>
<span><span class="co">#&gt;  Mode :logical              Mode :logical               </span></span>
<span><span class="co">#&gt;  FALSE:81                   FALSE:81                    </span></span>
<span><span class="co">#&gt;  TRUE :2                    TRUE :2                     </span></span>
<span><span class="co">#&gt;  NA's :466                  NA's :466                   </span></span>
<span><span class="co">#&gt;                                                         </span></span>
<span><span class="co">#&gt;                                                         </span></span>
<span><span class="co">#&gt;                                                         </span></span>
<span><span class="co">#&gt;  diag_epistaxis_nosebleed_clean diag_tuberculosis_clean</span></span>
<span><span class="co">#&gt;  Mode :logical                  Mode :logical          </span></span>
<span><span class="co">#&gt;  FALSE:81                       FALSE:82               </span></span>
<span><span class="co">#&gt;  TRUE :2                        TRUE :1                </span></span>
<span><span class="co">#&gt;  NA's :466                      NA's :466              </span></span>
<span><span class="co">#&gt;                                                        </span></span>
<span><span class="co">#&gt;                                                        </span></span>
<span><span class="co">#&gt;                                                        </span></span>
<span><span class="co">#&gt;  diag_neoplasm_unspecified_clean diag_big_testicles_clean</span></span>
<span><span class="co">#&gt;  Mode :logical                   Mode :logical           </span></span>
<span><span class="co">#&gt;  FALSE:82                        FALSE:82                </span></span>
<span><span class="co">#&gt;  TRUE :1                         TRUE :1                 </span></span>
<span><span class="co">#&gt;  NA's :466                       NA's :466               </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;  diag_syphilis_sti_clean diag_diarrhea_clean diag_injury_by_animal_zebu_clean</span></span>
<span><span class="co">#&gt;  Mode :logical           Mode :logical       Mode :logical                   </span></span>
<span><span class="co">#&gt;  FALSE:77                FALSE:82            FALSE:82                        </span></span>
<span><span class="co">#&gt;  TRUE :6                 TRUE :1             TRUE :1                         </span></span>
<span><span class="co">#&gt;  NA's :466               NA's :466           NA's :466                       </span></span>
<span><span class="co">#&gt;                                                                              </span></span>
<span><span class="co">#&gt;                                                                              </span></span>
<span><span class="co">#&gt;                                                                              </span></span>
<span><span class="co">#&gt;  diag_stomach_ache_clean diag_genetic_albinism_clean</span></span>
<span><span class="co">#&gt;  Mode :logical           Mode :logical              </span></span>
<span><span class="co">#&gt;  FALSE:82                FALSE:82                   </span></span>
<span><span class="co">#&gt;  TRUE :1                 TRUE :1                    </span></span>
<span><span class="co">#&gt;  NA's :466               NA's :466                  </span></span>
<span><span class="co">#&gt;                                                     </span></span>
<span><span class="co">#&gt;                                                     </span></span>
<span><span class="co">#&gt;                                                     </span></span>
<span><span class="co">#&gt;  diag_skin_soft_tissue_infection_clean</span></span>
<span><span class="co">#&gt;  Mode :logical                        </span></span>
<span><span class="co">#&gt;  FALSE:82                             </span></span>
<span><span class="co">#&gt;  TRUE :1                              </span></span>
<span><span class="co">#&gt;  NA's :466                            </span></span>
<span><span class="co">#&gt;                                       </span></span>
<span><span class="co">#&gt;                                       </span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="vaccinations">Vaccinations<a class="anchor" aria-label="anchor" href="#vaccinations"></a>
</h3>
<p>We’re going to categorize the vaccinations next:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">vaccine_card</span>, <span class="va">vaccination_history</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;             vaccination_history</span></span>
<span><span class="co">#&gt; vaccine_card Measles Measles polio Polio Polio dtc1 Polio dtc1 dtc2 dtc3</span></span>
<span><span class="co">#&gt;          Idk       0             0     0          0                    0</span></span>
<span><span class="co">#&gt;          No        3            69     5          0                    0</span></span>
<span><span class="co">#&gt;          Yes       2            96     1          1                    5</span></span>
<span><span class="co">#&gt;             vaccination_history</span></span>
<span><span class="co">#&gt; vaccine_card Polio dtc1 dtc2 dtc3 measles Polio dtc1 dtc2 dtc3 measles tetanus</span></span>
<span><span class="co">#&gt;          Idk                            4                                    0</span></span>
<span><span class="co">#&gt;          No                             3                                   18</span></span>
<span><span class="co">#&gt;          Yes                           35                                   10</span></span>
<span><span class="co">#&gt;             vaccination_history</span></span>
<span><span class="co">#&gt; vaccine_card Polio dtc1 dtc2 measles Polio dtc1 dtc3 measles</span></span>
<span><span class="co">#&gt;          Idk                       0                       0</span></span>
<span><span class="co">#&gt;          No                        1                       0</span></span>
<span><span class="co">#&gt;          Yes                       0                       1</span></span>
<span><span class="co">#&gt;             vaccination_history</span></span>
<span><span class="co">#&gt; vaccine_card Polio dtc2 dtc3 measles Polio dtc2 measles Polio measles Vacc idr</span></span>
<span><span class="co">#&gt;          Idk                       0                  0             1       12</span></span>
<span><span class="co">#&gt;          No                        0                  1             3      132</span></span>
<span><span class="co">#&gt;          Yes                       1                  0             0        0</span></span>
<span><span class="co">#&gt;             vaccination_history</span></span>
<span><span class="co">#&gt; vaccine_card Vacc other</span></span>
<span><span class="co">#&gt;          Idk          0</span></span>
<span><span class="co">#&gt;          No           4</span></span>
<span><span class="co">#&gt;          Yes          0</span></span></code></pre></div>
<p>It looks like for the most part, when people have a vaccination card
they have a history and can remember which vaccinations they have had.
I’m assuming Idk refers to folks who do not know <em>where</em> their
vaccination card is, because these people can still confidently answer
that they have had a specific vaccine.</p>
<p>For the folks who say No, it must mean that they do not have a
vaccination card. However, there are some cases where people have a
vaccination card but can say what vaccinations they have. Further, some
can claim to have other vaccinations besides those listed in the
survey.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">vaccine_card</span>, <span class="va">vaccine_other</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;             vaccine_other</span></span>
<span><span class="co">#&gt; vaccine_card   - Tsy  misy Tsy nisy</span></span>
<span><span class="co">#&gt;          Idk   0         0        0</span></span>
<span><span class="co">#&gt;          No  210         3        1</span></span>
<span><span class="co">#&gt;          Yes 103         0        0</span></span></code></pre></div>
<p>We can ignore this column as it is effectively the same as the
vaccine history column.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clean_2018_vaccinations.html">clean_2018_vaccinations</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">health_data_</span></span>
<span>  </span>
<span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"vacc_"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">skimr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html" class="external-link">skim</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">408</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">7</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">7</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table">
<colgroup>
<col width="28%">
<col width="14%">
<col width="20%">
<col width="7%">
<col width="28%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">vacc_measles_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.61</td>
<td align="left">TRU: 248, FAL: 160</td>
</tr>
<tr class="even">
<td align="left">vacc_polio_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.62</td>
<td align="left">TRU: 255, FAL: 153</td>
</tr>
<tr class="odd">
<td align="left">vacc_other_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.36</td>
<td align="left">FAL: 260, TRU: 148</td>
</tr>
<tr class="even">
<td align="left">vacc_dtc1_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.19</td>
<td align="left">FAL: 330, TRU: 78</td>
</tr>
<tr class="odd">
<td align="left">vacc_dtc2_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.19</td>
<td align="left">FAL: 330, TRU: 78</td>
</tr>
<tr class="even">
<td align="left">vacc_dtc3_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.19</td>
<td align="left">FAL: 331, TRU: 77</td>
</tr>
<tr class="odd">
<td align="left">vacc_tetanus_clean</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.07</td>
<td align="left">FAL: 380, TRU: 28</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="pregnancy">Pregnancy<a class="anchor" aria-label="anchor" href="#pregnancy"></a>
</h3>
<p>Next, pregnancy:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"preg"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; , , diag_pregnancy_related_clean = FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         pregnancies</span></span>
<span><span class="co">#&gt; pregnant 1 2 3 4 5 6 7 8</span></span>
<span><span class="co">#&gt;      No  0 0 0 0 0 0 0 0</span></span>
<span><span class="co">#&gt;      Yes 7 4 1 2 1 0 0 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; , , diag_pregnancy_related_clean = TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         pregnancies</span></span>
<span><span class="co">#&gt; pregnant 1 2 3 4 5 6 7 8</span></span>
<span><span class="co">#&gt;      No  0 0 0 0 0 0 0 0</span></span>
<span><span class="co">#&gt;      Yes 2 1 0 0 0 1 0 1</span></span></code></pre></div>
<p>This will be fairly simple and we will just create a column that
indicates whether the person is currently pregnant or not, and how many
pregnancies they’ve had in the past.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">number_deliveries</span>, <span class="va">number_live_births</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  number_live_births</span></span>
<span><span class="co">#&gt; number_deliveries  0  1  2  3  4  5  6  7  8</span></span>
<span><span class="co">#&gt;                 1  1 21  0  0  0  0  0  0  0</span></span>
<span><span class="co">#&gt;                 2  0  2 15  0  0  0  0  0  0</span></span>
<span><span class="co">#&gt;                 3  0  0  4  7  0  0  0  0  0</span></span>
<span><span class="co">#&gt;                 4  0  0  0  0  4  0  0  0  0</span></span>
<span><span class="co">#&gt;                 5  0  0  0  0  1  5  0  0  0</span></span>
<span><span class="co">#&gt;                 6  0  0  0  0  1  1  0  0  0</span></span>
<span><span class="co">#&gt;                 7  0  0  0  0  0  1  1  1  0</span></span>
<span><span class="co">#&gt;                 8  0  0  0  0  0  0  0  0  2</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">birthweight</span>, <span class="va">birthweight_gram</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">as.numeric</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: There was 1 warning in `mutate()`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `across(everything(), as.numeric)`.</span></span>
<span><span class="co">#&gt; Caused by warning:</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> NAs introduced by coercion</span></span>
<span><span class="co">#&gt;   birthweight  birthweight_gram</span></span>
<span><span class="co">#&gt;  Min.   : NA   Min.   :1500    </span></span>
<span><span class="co">#&gt;  1st Qu.: NA   1st Qu.:2500    </span></span>
<span><span class="co">#&gt;  Median : NA   Median :3000    </span></span>
<span><span class="co">#&gt;  Mean   :NaN   Mean   :2894    </span></span>
<span><span class="co">#&gt;  3rd Qu.: NA   3rd Qu.:3200    </span></span>
<span><span class="co">#&gt;  Max.   : NA   Max.   :4200    </span></span>
<span><span class="co">#&gt;  NA's   :408   NA's   :361</span></span></code></pre></div>
<p>There’s not much to go off of here, but I’m assuming
<code>birthweight_gram</code> is the weight of the most recent
child.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/clean_2018_pregnancy.html">clean_2018_pregnancy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">health_data_</span></span>
<span></span>
<span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"pregnancy|birth|deliveries"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"clean"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">skimr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html" class="external-link">skim</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">408</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">logical</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table">
<colgroup>
<col width="28%">
<col width="12%">
<col width="17%">
<col width="9%">
<col width="11%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">pregnancy_status_clean</td>
<td align="right">246</td>
<td align="right">0.4</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">Not: 93, Cur: 69</td>
</tr></tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table">
<colgroup>
<col width="39%">
<col width="13%">
<col width="18%">
<col width="6%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">diag_pregnancy_related_clean</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.07</td>
<td align="left">FAL: 64, TRU: 5</td>
</tr></tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="32%">
<col width="9%">
<col width="12%">
<col width="7%">
<col width="6%">
<col width="4%">
<col width="4%">
<col width="4%">
<col width="7%">
<col width="4%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">number_deliveries_clean</td>
<td align="right">340</td>
<td align="right">0.17</td>
<td align="right">2.72</td>
<td align="right">1.92</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3.25</td>
<td align="right">8</td>
<td align="left">▇▂▂▁▁</td>
</tr>
<tr class="even">
<td align="left">number_live_births_clean</td>
<td align="right">341</td>
<td align="right">0.16</td>
<td align="right">2.54</td>
<td align="right">1.80</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3.50</td>
<td align="right">8</td>
<td align="left">▇▇▂▂▁</td>
</tr>
<tr class="odd">
<td align="left">most_recent_birthweight_gram_clean</td>
<td align="right">361</td>
<td align="right">0.12</td>
<td align="right">2893.62</td>
<td align="right">562.37</td>
<td align="right">1500</td>
<td align="right">2500</td>
<td align="right">3000</td>
<td align="right">3200.00</td>
<td align="right">4200</td>
<td align="left">▂▃▇▅▂</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="other">Other<a class="anchor" aria-label="anchor" href="#other"></a>
</h3>
<p>There is no data in the columns dealing with deceased survey
participants but we’ll keep them in for future comparison.</p>
<p>Looking at the surgical history:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"surgeries"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries &amp; Nanala aretina apandisite Niterak nodidiana</span></span>
<span><span class="co">#&gt;       -   1                         0                 0</span></span>
<span><span class="co">#&gt;       No  0                         0                 0</span></span>
<span><span class="co">#&gt;       Yes 0                         1                 1</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries Niteraka zaza iray  dia nididiana Operation  maso Pandicite</span></span>
<span><span class="co">#&gt;       -                                   0               1         1</span></span>
<span><span class="co">#&gt;       No                                  0               0         0</span></span>
<span><span class="co">#&gt;       Yes                                 1               0         0</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries Voa famaky ny tongotra nijahifina</span></span>
<span><span class="co">#&gt;       -                                   0</span></span>
<span><span class="co">#&gt;       No                                  0</span></span>
<span><span class="co">#&gt;       Yes                                 1</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries Voa famaky tamin ny tongotra 6 zaitry</span></span>
<span><span class="co">#&gt;       -                                       0</span></span>
<span><span class="co">#&gt;       No                                      0</span></span>
<span><span class="co">#&gt;       Yes                                     1</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries Voa kakazo ny kirandra nijahifina</span></span>
<span><span class="co">#&gt;       -                                   0</span></span>
<span><span class="co">#&gt;       No                                  0</span></span>
<span><span class="co">#&gt;       Yes                                 1</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries Voa lasety draley nijalafa tamin'ny tongotra</span></span>
<span><span class="co">#&gt;       -                                              0</span></span>
<span><span class="co">#&gt;       No                                             0</span></span>
<span><span class="co">#&gt;       Yes                                            1</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries Voa tomboka omby tamin ny hoditra kibo ka nijahifina</span></span>
<span><span class="co">#&gt;       -                                                      0</span></span>
<span><span class="co">#&gt;       No                                                     0</span></span>
<span><span class="co">#&gt;       Yes                                                    1</span></span>
<span><span class="co">#&gt;          prior_surgeries</span></span>
<span><span class="co">#&gt; surgeries Voakiso tamin'ny tanana</span></span>
<span><span class="co">#&gt;       -                         0</span></span>
<span><span class="co">#&gt;       No                        0</span></span>
<span><span class="co">#&gt;       Yes                       1</span></span></code></pre></div>
<p>These will likely need a deliberate translation.</p>
<p>Lastly, deformities will simply get a translation:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">health_data_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"deformit"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                  other_visual_health_deformities</span></span>
<span><span class="co">#&gt; visual_health_deformities         Balana Kondohalitry, moa Simba maso ilany</span></span>
<span><span class="co">#&gt;   Albinism                             0                 0                0</span></span>
<span><span class="co">#&gt;   Cleft palate                         0                 0                0</span></span>
<span><span class="co">#&gt;   Club foot                            0                 0                0</span></span>
<span><span class="co">#&gt;   Deformities na                       0                 0                0</span></span>
<span><span class="co">#&gt;   Missing teeth                        0                 0                0</span></span>
<span><span class="co">#&gt;   Missing teeth other deformities      0                 0                1</span></span>
<span><span class="co">#&gt;   Other deformities                    1                 1                0</span></span>
<span><span class="co">#&gt;                                  other_visual_health_deformities</span></span>
<span><span class="co">#&gt; visual_health_deformities         Tongotra</span></span>
<span><span class="co">#&gt;   Albinism                               0</span></span>
<span><span class="co">#&gt;   Cleft palate                           0</span></span>
<span><span class="co">#&gt;   Club foot                              0</span></span>
<span><span class="co">#&gt;   Deformities na                         0</span></span>
<span><span class="co">#&gt;   Missing teeth                          0</span></span>
<span><span class="co">#&gt;   Missing teeth other deformities        0</span></span>
<span><span class="co">#&gt;   Other deformities                      1</span></span></code></pre></div>
<p>We’ll just concatenate the deformities and other deformities columns
into a single column and then translate them into English.</p>
</div>
<div class="section level2">
<h2 id="preprocess_2018_health">preprocess_2018_health<a class="anchor" aria-label="anchor" href="#preprocess_2018_health"></a>
</h2>
<p>The final function will combine all of these steps into a single
function that can be used to preprocess the 2018 health data in the
pipeline.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/preprocess_2018_health.html">preprocess_2018_health</a></span><span class="op">(</span><span class="va">open_census</span>, <span class="va">cohort_2018_deid</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">health_data_</span></span>
<span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html" class="external-link">skim</a></span><span class="op">(</span><span class="va">health_data_</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">health_data_</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">408</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">42</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="left">factor</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">logical</td>
<td align="left">30</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="26%">
<col width="12%">
<col width="17%">
<col width="5%">
<col width="5%">
<col width="7%">
<col width="11%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">uuid</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">408</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">diagnosis_english</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">6</td>
<td align="right">40</td>
<td align="right">0</td>
<td align="right">20</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">diagnosis_icd10_code</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">7</td>
<td align="right">16</td>
<td align="right">0</td>
<td align="right">19</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">vaccine_card</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">20</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">surgery_description</td>
<td align="right">399</td>
<td align="right">0.02</td>
<td align="right">12</td>
<td align="right">31</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">deformities</td>
<td align="right">396</td>
<td align="right">0.03</td>
<td align="right">8</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">8</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table">
<colgroup>
<col width="18%">
<col width="10%">
<col width="14%">
<col width="8%">
<col width="9%">
<col width="38%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sex</td>
<td align="right">0</td>
<td align="right">1.0</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">fem: 212, mal: 196</td>
</tr>
<tr class="even">
<td align="left">age_group</td>
<td align="right">0</td>
<td align="right">1.0</td>
<td align="left">FALSE</td>
<td align="right">8</td>
<td align="left">25–: 136, 10–: 73, 20–: 63, 15–: 55</td>
</tr>
<tr class="odd">
<td align="left">pregnancy_status</td>
<td align="right">246</td>
<td align="right">0.4</td>
<td align="left">FALSE</td>
<td align="right">2</td>
<td align="left">Not: 93, Cur: 69</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table">
<colgroup>
<col width="40%">
<col width="12%">
<col width="17%">
<col width="6%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">diag_hypertension</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.06</td>
<td align="left">FAL: 65, TRU: 4</td>
</tr>
<tr class="even">
<td align="left">diag_malaria</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.54</td>
<td align="left">TRU: 37, FAL: 32</td>
</tr>
<tr class="odd">
<td align="left">diag_pregnancy_related</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.07</td>
<td align="left">FAL: 64, TRU: 5</td>
</tr>
<tr class="even">
<td align="left">diag_developmental_cognitive</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="odd">
<td align="left">diag_shivering_trembling</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="even">
<td align="left">diag_ear_ache</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.03</td>
<td align="left">FAL: 67, TRU: 2</td>
</tr>
<tr class="odd">
<td align="left">diag_ear_nose_throat</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.03</td>
<td align="left">FAL: 67, TRU: 2</td>
</tr>
<tr class="even">
<td align="left">diag_asthma</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.04</td>
<td align="left">FAL: 66, TRU: 3</td>
</tr>
<tr class="odd">
<td align="left">diag_jaundice</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.00</td>
<td align="left">FAL: 69</td>
</tr>
<tr class="even">
<td align="left">diag_heel_fissures</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.00</td>
<td align="left">FAL: 69</td>
</tr>
<tr class="odd">
<td align="left">diag_hernia_prolapse</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.03</td>
<td align="left">FAL: 67, TRU: 2</td>
</tr>
<tr class="even">
<td align="left">diag_dizziness_syncope</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.03</td>
<td align="left">FAL: 67, TRU: 2</td>
</tr>
<tr class="odd">
<td align="left">diag_epistaxis_nosebleed</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="even">
<td align="left">diag_tuberculosis</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="odd">
<td align="left">diag_neoplasm_unspecified</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="even">
<td align="left">diag_big_testicles</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="odd">
<td align="left">diag_syphilis_sti</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.09</td>
<td align="left">FAL: 63, TRU: 6</td>
</tr>
<tr class="even">
<td align="left">diag_diarrhea</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="odd">
<td align="left">diag_injury_by_animal_zebu</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="even">
<td align="left">diag_stomach_ache</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="odd">
<td align="left">diag_genetic_albinism</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="even">
<td align="left">diag_skin_soft_tissue_infection</td>
<td align="right">339</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="left">FAL: 68, TRU: 1</td>
</tr>
<tr class="odd">
<td align="left">vacc_measles</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.61</td>
<td align="left">TRU: 248, FAL: 160</td>
</tr>
<tr class="even">
<td align="left">vacc_polio</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.62</td>
<td align="left">TRU: 255, FAL: 153</td>
</tr>
<tr class="odd">
<td align="left">vacc_other</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.36</td>
<td align="left">FAL: 260, TRU: 148</td>
</tr>
<tr class="even">
<td align="left">vacc_dtc1</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.19</td>
<td align="left">FAL: 330, TRU: 78</td>
</tr>
<tr class="odd">
<td align="left">vacc_dtc2</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.19</td>
<td align="left">FAL: 330, TRU: 78</td>
</tr>
<tr class="even">
<td align="left">vacc_dtc3</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.19</td>
<td align="left">FAL: 331, TRU: 77</td>
</tr>
<tr class="odd">
<td align="left">vacc_tetanus</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.07</td>
<td align="left">FAL: 380, TRU: 28</td>
</tr>
<tr class="even">
<td align="left">surgical_history</td>
<td align="right">172</td>
<td align="right">0.58</td>
<td align="right">0.04</td>
<td align="left">FAL: 227, TRU: 9</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table">
<colgroup>
<col width="28%">
<col width="9%">
<col width="13%">
<col width="7%">
<col width="6%">
<col width="4%">
<col width="4%">
<col width="4%">
<col width="7%">
<col width="4%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">number_deliveries</td>
<td align="right">340</td>
<td align="right">0.17</td>
<td align="right">2.72</td>
<td align="right">1.92</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3.25</td>
<td align="right">8</td>
<td align="left">▇▂▂▁▁</td>
</tr>
<tr class="even">
<td align="left">number_live_births</td>
<td align="right">341</td>
<td align="right">0.16</td>
<td align="right">2.54</td>
<td align="right">1.80</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3.50</td>
<td align="right">8</td>
<td align="left">▇▇▂▂▁</td>
</tr>
<tr class="odd">
<td align="left">most_recent_birthweight_gram</td>
<td align="right">361</td>
<td align="right">0.12</td>
<td align="right">2893.62</td>
<td align="right">562.37</td>
<td align="right">1500</td>
<td align="right">2500</td>
<td align="right">3000</td>
<td align="right">3200.00</td>
<td align="right">4200</td>
<td align="left">▂▃▇▅▂</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tinashe Tapera.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
