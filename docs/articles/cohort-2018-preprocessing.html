<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cohort 2018 Preprocessing • MAHERYCohortHarmonization</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Cohort 2018 Preprocessing">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MAHERYCohortHarmonization</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cohort-2018-preprocessing.html">Cohort 2018 Preprocessing</a>
    </li>
    <li>
      <a href="../articles/get-started.html">Get started</a>
    </li>
    <li>
      <a href="../articles/OutputTables.html">Pipeline Outputs</a>
    </li>
    <li>
      <a href="../articles/preprocessing-2018-household-heads.html">Preprocessing 2018 Household Heads</a>
    </li>
    <li>
      <a href="../articles/tracking-input-data.html">Tracking Input Data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Cohort 2018 Preprocessing</h1>
            
      

      <div class="hidden name"><code>cohort-2018-preprocessing.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MAHERYCohortHarmonization</span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_preprocess_2018.Rmd: do not edit by hand -->
<div class="section level2">
<h2 id="preprocess_srp2018">preprocess_srp2018<a class="anchor" aria-label="anchor" href="#preprocess_srp2018"></a>
</h2>
<p>In this notebook, we’re exploring and preprocessing the 2018 data
from OpenSRP. The function will ultimately preprocess the data so that
it can be harmonized effectively with the other datasets. Importantly,
we use the column suffix <code>_clean</code> to denote that the column
has been cleaned and is being kept for analysis.</p>
<p>What is OpenSRP?</p>
<p>What is OpenSRP? It appears OpenSRP should cover year 2018. What is
it and what does it survey? &gt; Open SRP is a software to collect data.
We collaborated with an Indonesian-based researchin 2018 that managed
and stored our data. Their website does not exist anymore. That is the
first platform we used for the ongoing health surveillance surveys. The
data is stored in a flat file format.</p>
<p>Load the targets data for prototyping:</p>
<p>The OpenSRP file has a number of sheets:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; here() starts at /net/rcstorenfs02/ifs/rc_labs/dominici_lab/lab/data_processing/csph_MDG-SurveyHarmonization/MAHERYCohortHarmonization</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/targets/" class="external-link">targets</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_load.html" class="external-link">tar_load</a></span><span class="op">(</span><span class="va">opensrp</span>, store <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"_targets"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_load.html" class="external-link">tar_load</a></span><span class="op">(</span><span class="va">opensrp_dict</span>, store <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"_targets"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">MAHERYCohortHarmonization</span></span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:testthat':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     matches</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor" class="external-link">janitor</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'janitor'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     chisq.test, fisher.test</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/targets/" class="external-link">targets</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/skimr/" class="external-link">skimr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'skimr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:testthat':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     matches</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/" class="external-link">forcats</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'lubridate'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     date, intersect, setdiff, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googledrive.tidyverse.org" class="external-link">googledrive</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://corybrunson.github.io/ggalluvial/" class="external-link">ggalluvial</a></span><span class="op">)</span></span></code></pre></div>
<p>Importantly, there are a few “hierarchical levels” of data catalogued
here.</p>
<p>Level 0: Household enrollment Level 1: Individuals in household Level
2: Antropometric data (every 3 months), dietary intake data collected
from head of household (every 4 months), followup data</p>
<p>Although, for clarity, this should be named the opposite…?</p>
<p>Ultimately, a good idea might be to have it such that the most
granular level is an individual, the next level up is their household.
But we can solve for that later.</p>
<div class="section level4">
<h4 id="audit_categorical_cleaning">audit_categorical_cleaning<a class="anchor" aria-label="anchor" href="#audit_categorical_cleaning"></a>
</h4>
<p>A function for plotting the mapping of categorical variables from raw
to clean, see <code><a href="../reference/audit_categorical_cleaning.html">audit_categorical_cleaning()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="open-census">Open Census<a class="anchor" aria-label="anchor" href="#open-census"></a>
</h3>
<p>We’re told that the Open census sheet is the baseline. This should be
the most granular level of individual data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census</span> <span class="op">&lt;-</span> <span class="va">opensrp</span><span class="op">$</span><span class="va">`Open census`</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">open_census</span><span class="op">)</span></span>
<span><span class="co">#&gt;    User Id          Hh Head Name            Id               Member         </span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Name Family Member Date Census         Dob Actual          Dob Date        </span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;   Dob Month           Dob Year         Ethnic Group       Other Ethnic Group</span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;      Sex             Education          Profession        Profession Choices</span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Other Profession   Marital Status     Prior Health Care  Prior Diagnosis   </span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Other Prior Diagnosis Visual Health Deformities</span></span>
<span><span class="co">#&gt;  Length:550            Length:550               </span></span>
<span><span class="co">#&gt;  Class :character      Class :character         </span></span>
<span><span class="co">#&gt;  Mode  :character      Mode  :character         </span></span>
<span><span class="co">#&gt;  Other Visual Health Deformities  Surgeries         Prior Surgeries   </span></span>
<span><span class="co">#&gt;  Length:550                      Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character                Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character                Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Vaccine Card       Vaccination History Vaccine Other        Pregnant        </span></span>
<span><span class="co">#&gt;  Length:550         Length:550          Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character    Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character    Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Pregnancies        Number Deliveries  Number Live Births Birthweight       </span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Birthweight Gram   Is Person Alive    Cause Of Death Date Of Death </span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Mode:logical   Mode:logical  </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   NA's:550       NA's:550      </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character                                </span></span>
<span><span class="co">#&gt;  Death Date      Deathmonth         Deathyear          Enum Note        </span></span>
<span><span class="co">#&gt;  Mode:logical   Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  NA's:550       Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;                 Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Enum Comment       Submission Date     Is Closed        </span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Client Version Submission Date Server Version Submission Date</span></span>
<span><span class="co">#&gt;  Length:550                     Length:550                    </span></span>
<span><span class="co">#&gt;  Class :character               Class :character              </span></span>
<span><span class="co">#&gt;  Mode  :character               Mode  :character</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">skimr</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html" class="external-link">skim</a></span><span class="op">(</span><span class="va">open_census</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">open_census</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">550</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">46</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">43</td>
</tr>
<tr class="odd">
<td align="left">logical</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="35%">
<col width="11%">
<col width="15%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="10%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">User Id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">11</td>
<td align="right">11</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Hh Head Name</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">26</td>
<td align="right">0</td>
<td align="right">134</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Id</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">32</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">136</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Member</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">36</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">550</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Name Family Member</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">39</td>
<td align="right">0</td>
<td align="right">536</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Date Census</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">38</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Dob Actual</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Dob Date</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">31</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Dob Month</td>
<td align="right">2</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">25</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Dob Year</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">75</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Ethnic Group</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">8</td>
<td align="right">18</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Other Ethnic Group</td>
<td align="right">548</td>
<td align="right">0.00</td>
<td align="right">8</td>
<td align="right">15</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Education</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Profession</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Profession Choices</td>
<td align="right">67</td>
<td align="right">0.88</td>
<td align="right">6</td>
<td align="right">23</td>
<td align="right">0</td>
<td align="right">8</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Other Profession</td>
<td align="right">548</td>
<td align="right">0.00</td>
<td align="right">13</td>
<td align="right">21</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Marital Status</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">6</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Prior Health Care</td>
<td align="right">314</td>
<td align="right">0.43</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Prior Diagnosis</td>
<td align="right">467</td>
<td align="right">0.15</td>
<td align="right">3</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">11</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Other Prior Diagnosis</td>
<td align="right">514</td>
<td align="right">0.07</td>
<td align="right">3</td>
<td align="right">20</td>
<td align="right">0</td>
<td align="right">19</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Visual Health Deformities</td>
<td align="right">309</td>
<td align="right">0.44</td>
<td align="right">8</td>
<td align="right">31</td>
<td align="right">0</td>
<td align="right">7</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Other Visual Health Deformities</td>
<td align="right">545</td>
<td align="right">0.01</td>
<td align="right">6</td>
<td align="right">25</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Surgeries</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Prior Surgeries</td>
<td align="right">538</td>
<td align="right">0.02</td>
<td align="right">1</td>
<td align="right">52</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Vaccine Card</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Vaccination History</td>
<td align="right">142</td>
<td align="right">0.74</td>
<td align="right">5</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">14</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Vaccine Other</td>
<td align="right">232</td>
<td align="right">0.58</td>
<td align="right">1</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Pregnant</td>
<td align="right">320</td>
<td align="right">0.42</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Pregnancies</td>
<td align="right">418</td>
<td align="right">0.24</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Number Deliveries</td>
<td align="right">419</td>
<td align="right">0.24</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Number Live Births</td>
<td align="right">420</td>
<td align="right">0.24</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">11</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Birthweight</td>
<td align="right">180</td>
<td align="right">0.67</td>
<td align="right">14</td>
<td align="right">17</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Birthweight Gram</td>
<td align="right">502</td>
<td align="right">0.09</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">15</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Is Person Alive</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Deathmonth</td>
<td align="right">236</td>
<td align="right">0.57</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Deathyear</td>
<td align="right">236</td>
<td align="right">0.57</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Enum Note</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Enum Comment</td>
<td align="right">235</td>
<td align="right">0.57</td>
<td align="right">1</td>
<td align="right">60</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Submission Date</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">25</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Is Closed</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Client Version Submission Date</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">19</td>
<td align="right">19</td>
<td align="right">0</td>
<td align="right">544</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Server Version Submission Date</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">19</td>
<td align="right">19</td>
<td align="right">0</td>
<td align="right">453</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="left">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Cause Of Death</td>
<td align="right">550</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="even">
<td align="left">Date Of Death</td>
<td align="right">550</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
<tr class="odd">
<td align="left">Death Date</td>
<td align="right">550</td>
<td align="right">0</td>
<td align="right">NaN</td>
<td align="left">:</td>
</tr>
</tbody>
</table>
<p>We’ll start by using janitor to clean the column names.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op">&lt;-</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">clean_names</a></span><span class="op">(</span><span class="va">open_census</span><span class="op">)</span></span></code></pre></div>
<p>What is user ID?</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">user_id</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>We only have two unique values for this. The values themselves are
just a region in Madagascar. So we can leave this column as a
factor.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>user_id_clean <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">user_id</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
<p>Next, <code>hh_head_name</code>. This is supposedly the name of the
head of household.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">hh_head_name</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 134</span></span></code></pre></div>
<p>We have 134 unique HHs. But, we can see that there are some weird
anomalies here. For example, some entries have commas and extra spaces.
We can clean this up with <code>str_squish</code> and
<code>str_remove_all</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>hh_head_name_clean <span class="op">=</span> <span class="va">hh_head_name</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html" class="external-link">str_squish</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove_all</a></span><span class="op">(</span><span class="st">","</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">hh_head_name_clean</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 134</span></span></code></pre></div>
<p>The number of unique entries stays the same, so this is
encouraging.</p>
<p>Next, we look at the <code>name_family_member</code> column. This is
the name of the household member, ideally the most granular observation
in the dataset.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">name_family_member</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 536</span></span></code></pre></div>
<p>Some must be duplicated, so let’s find those:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name_family_member</span>, <span class="va">hh_head_name</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">dups</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'name_family_member'. You can override</span></span>
<span><span class="co">#&gt; using the `.groups` argument.</span></span>
<span></span>
<span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name_family_member</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">dups</span><span class="op">$</span><span class="va">name_family_member</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">name_family_member</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">multi_names</span></span></code></pre></div>
<p>There are a number of people who are listed as the same name, but
with different IDs or member codes.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>name_family_member_clean <span class="op">=</span> <span class="va">name_family_member</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html" class="external-link">str_squish</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove_all</a></span><span class="op">(</span><span class="st">","</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
<p>This will be dealt with when we create unique IDs below.</p>
<div class="section level4">
<h4 id="dob">DoB<a class="anchor" aria-label="anchor" href="#dob"></a>
</h4>
<p>Next is date of birth. This is coded pretty weird, but we have a
column called <code>dob_actual</code> which might tell us if it is a
valid DoB row.</p>
<p>We should check to make sure that everyone has at least one
<code>yes</code> to this column:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">dob_actual</span> <span class="op">==</span> <span class="st">"Yes"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">name_family_member</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 317</span></span></code></pre></div>
<p>So there are some people who do not have a DoB actual. Let’s do our
best to form DoBs from the columns anyway, and see how that goes.
Importantly, there are cases where the month is coded as ‘month idr’.
Here’s a chatgpt response to that:</p>
<blockquote>
<p>This abbreviation may have been derived from “I don’t remember” in
English, either directly or influenced by informal bilingual usage,
especially in multilingual communities where French and some English are
spoken.</p>
</blockquote>
<p>I think we can safely assume that this is the case, and as long as
the year is valid, we can make an assumption and place their DoB as
January 1st of that year (we’ll flag these though as
<code>dob_estimated</code>).</p>
<p>Below is the function that makes our DoBs:</p>
<p>Let’s see the effect of this mutation:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clean_opencensus_dob.html">clean_opencensus_dob</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span>
<span><span class="co">#&gt; Warning: There was 1 warning in `mutate()`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `dob_clean = `%&gt;%`(...)`.</span></span>
<span><span class="co">#&gt; Caused by warning:</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span>  7 failed to parse.</span></span></code></pre></div>
<p>We lose 7 rows in the process.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dob_clean</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 53</span></span></span>
<span><span class="co">#&gt;   user_id    hh_head_name id    member name_family_member date_census dob_actual</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Antaravat… Delore       2fa5… 35528… Salaiga            2017-12-04  No        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Antaravat… Jacky jean … A298… Cee1e… Jacky jean claude  2017-07-10  No        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Antaravat… Moratombo f… 8f3a… 54cad… Maoratombo         2018-05-06  No        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Antaravat… Rabe arsel   E7f3… E553b… Angelica           2018-04-07  No        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Antaravat… Radison      0c0a… 3c8a5… Razafinjafitsara … 2017-12-06  No        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Antaravat… Raherimanan… Ffbb… 39d71… Raherimanana jean… 2017-12-12  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Antaravat… Razanatiana… 70c6… D3a5d… Beterezineolizina  2017-12-04  No        </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 46 more variables: dob_date &lt;chr&gt;, dob_month &lt;chr&gt;, dob_year &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ethnic_group &lt;chr&gt;, other_ethnic_group &lt;chr&gt;, sex &lt;chr&gt;, education &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   profession &lt;chr&gt;, profession_choices &lt;chr&gt;, other_profession &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   marital_status &lt;chr&gt;, prior_health_care &lt;chr&gt;, prior_diagnosis &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   other_prior_diagnosis &lt;chr&gt;, visual_health_deformities &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   other_visual_health_deformities &lt;chr&gt;, surgeries &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   prior_surgeries &lt;chr&gt;, vaccine_card &lt;chr&gt;, vaccination_history &lt;chr&gt;, …</span></span></span></code></pre></div>
<p>One of them is coded as a leap year in 1997 (impossible). What’s
interesting is that the <code>dob_actual</code> value is “Yes”, so this
is definitely strange. Four of them have 999 (NA) as their year, so we
can’t do anything about that. The remaining 2 have NA in the month, so
we cannot use them.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">dob_actual</span>, <span class="va">dob_estimated</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;           dob_estimated</span></span>
<span><span class="co">#&gt; dob_actual FALSE TRUE</span></span>
<span><span class="co">#&gt;        No      0  226</span></span>
<span><span class="co">#&gt;        Yes   270   54</span></span></code></pre></div>
<p>There were 54 cases where DoB was estimated but the original column
said that it was actual. I wonder how these got encoded that way
then?</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">dob_actual</span> <span class="op">==</span> <span class="st">"Yes"</span> <span class="op">&amp;</span> <span class="va">dob_estimated</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 54 × 53</span></span></span>
<span><span class="co">#&gt;    user_id   hh_head_name id    member name_family_member date_census dob_actual</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Antarava… Avelice      6fb7… E25c3… Avelice            2017-12-12  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Antarava… Be alphonse  3165… 0fc5d… Be alphonse        2017-12-07  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Antarava… Be alphonse  3165… 1495a… Razafindraranto o… 2017-12-07  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Antarava… Be angenica  A469… 9a1ae… Be angenica        2017-12-02  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Antarava… Be razakand… Ac86… Ebaee… Alphine            2017-12-05  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Antarava… Be rolin ii  497e… 2c047… Be rolin ii        2017-12-08  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Antarava… Be zela      2077… A4533… Be zela            2017-12-14  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Antarava… Be zela      2077… F680e… Jumela             2017-12-14  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Antarava… Benosy raph… 3340… 7d0ad… Judianot           2017-12-11  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Antarava… Besargene    456d… 93485… Miscanah           2017-12-06  Yes       </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 44 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 46 more variables: dob_date &lt;chr&gt;, dob_month &lt;chr&gt;, dob_year &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ethnic_group &lt;chr&gt;, other_ethnic_group &lt;chr&gt;, sex &lt;chr&gt;, education &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   profession &lt;chr&gt;, profession_choices &lt;chr&gt;, other_profession &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   marital_status &lt;chr&gt;, prior_health_care &lt;chr&gt;, prior_diagnosis &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   other_prior_diagnosis &lt;chr&gt;, visual_health_deformities &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   other_visual_health_deformities &lt;chr&gt;, surgeries &lt;chr&gt;, …</span></span></span></code></pre></div>
<p>What is the distribution of DoB?</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">min_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">open_census_</span><span class="op">$</span><span class="va">dob_clean</span>,na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">max_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">open_census_</span><span class="op">$</span><span class="va">dob_clean</span>,na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dob_clean</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">min_year</span><span class="op">:</span><span class="va">max_year</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># one bin per year</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_labels <span class="op">=</span> <span class="st">"%Y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Distribution of Date of Birth binned by Year"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 7 rows containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_bin()`).</span></span></code></pre></div>
<p><img src="cohort-2018-preprocessing_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>We can move on with the other variables.</p>
</div>
</div>
<div class="section level3">
<h3 id="open-census-demographics-contd">Open Census — Demographics Cont’d<a class="anchor" aria-label="anchor" href="#open-census-demographics-contd"></a>
</h3>
<p>We can process ethnic group next:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span><span class="op">$</span><span class="va">ethnic_group</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; .</span></span>
<span><span class="co">#&gt;           Betsileo      Betsimisaraka Ethnic group other          Tsimihety </span></span>
<span><span class="co">#&gt;                 12                526                  2                 10</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span><span class="op">$</span><span class="va">other_ethnic_group</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; .</span></span>
<span><span class="co">#&gt; Metisy betsileo        Sihanaka </span></span>
<span><span class="co">#&gt;               1               1</span></span></code></pre></div>
<p>I think we can collapse these into a single column.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ethnicity_clean <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">ethnic_group</span><span class="op">)</span>     <span class="op">~</span> <span class="va">other_ethnic_group</span>,</span>
<span>      <span class="va">ethnic_group</span> <span class="op">==</span> <span class="st">"Ethnic group other"</span> <span class="op">~</span> <span class="va">other_ethnic_group</span>,</span>
<span>      .default <span class="op">=</span> <span class="va">ethnic_group</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span><span class="op">$</span><span class="va">ethnicity</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Unknown or uninitialised column: `ethnicity`.</span></span>
<span><span class="co">#&gt; &lt; table of extent 0 &gt;</span></span></code></pre></div>
<div class="section level4">
<h4 id="education-profession">Education &amp; Profession<a class="anchor" aria-label="anchor" href="#education-profession"></a>
</h4>
<p>The recoding of education is done like so:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/recode_opensrp_education.html">recode_opensrp_education</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span><span class="op">$</span><span class="va">education_level_clean</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; .</span></span>
<span><span class="co">#&gt; no_formal_education             primary     lower_secondary     upper_secondary </span></span>
<span><span class="co">#&gt;                 122                 278                 133                  16 </span></span>
<span><span class="co">#&gt;    higher_education </span></span>
<span><span class="co">#&gt;                   1</span></span></code></pre></div>
<p>I think we can comfortably collapse profession</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">'^profession*'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;              profession_choices</span></span>
<span><span class="co">#&gt; profession    Farmer Farmer profession other Farmer shop owner Farmer teacher</span></span>
<span><span class="co">#&gt;   Not working      0                       0                 0              0</span></span>
<span><span class="co">#&gt;   Occupation     300                       2                 3              2</span></span>
<span><span class="co">#&gt;   Too young        0                       0                 0              0</span></span>
<span><span class="co">#&gt;              profession_choices</span></span>
<span><span class="co">#&gt; profession    Profession na Shop owner Student Teacher</span></span>
<span><span class="co">#&gt;   Not working            12          0       0       0</span></span>
<span><span class="co">#&gt;   Occupation              0          1     127       2</span></span>
<span><span class="co">#&gt;   Too young              34          0       0       0</span></span></code></pre></div>
<p>We can classify employment with the following:</p>
<blockquote>
<p>“Employment status is classified following ILO and DHIS2
recommendations: distinguishing Employed, Unemployed, Inactive
(students, homemakers, retirees, disabled), Not applicable (persons
below minimum working age), and Unknown.”</p>
</blockquote>
<p>We have a column <code>other_profession</code> which currently only
only has two outstanding entries: <code>commitionaire</code> and
<code>Zaza loatra tsy miasa</code>. The latter means “too young,” and
the former likely means “Small vendor / commission agent”. Hence, we can
remove the latter and assign the former to <code>vendor</code>. I
believe we can combine that with the option
<code>Farmer shop owner</code> in the other column too.</p>
<p>First, we classify employment, and then formalize the profession
choices.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>employment_status_clean <span class="op">=</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">profession</span><span class="op">)</span> <span class="op">==</span> <span class="st">"not working"</span> <span class="op">~</span> <span class="st">"inactive"</span>,</span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">profession</span><span class="op">)</span> <span class="op">==</span> <span class="st">"occupation"</span>  <span class="op">~</span> <span class="st">"employed"</span>,</span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">profession</span><span class="op">)</span> <span class="op">==</span> <span class="st">"too young"</span>   <span class="op">~</span> <span class="st">"not applicable"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    profession_clean <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">profession_choices</span><span class="op">)</span>, <span class="st">"farmer"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"farmer"</span>,</span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">profession_choices</span><span class="op">)</span>, <span class="st">"shop owner"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"shop owner"</span>,</span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">profession_choices</span><span class="op">)</span>, <span class="st">"teacher"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"teacher"</span>,</span>
<span>      <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="va">profession_choices</span><span class="op">)</span>, <span class="st">"student"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"student"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">employment_status_clean</span>, <span class="va">profession_clean</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        profession_clean</span></span>
<span><span class="co">#&gt; employment_status_clean farmer shop owner student teacher</span></span>
<span><span class="co">#&gt;          employed          307          1     127       2</span></span>
<span><span class="co">#&gt;          inactive            0          0       0       0</span></span>
<span><span class="co">#&gt;          not applicable      0          0       0       0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="sex-and-marital-status">Sex and Marital Status<a class="anchor" aria-label="anchor" href="#sex-and-marital-status"></a>
</h4>
<p>This should be a fairly simple one:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">marital_status</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; marital_status</span></span>
<span><span class="co">#&gt; Divorced  Married   Single  Widowed </span></span>
<span><span class="co">#&gt;        3      241      299        7</span></span></code></pre></div>
<p>We can leave it as is.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>marital_status_clean <span class="op">=</span> <span class="va">marital_status</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; sex</span></span>
<span><span class="co">#&gt; Female   Male </span></span>
<span><span class="co">#&gt;    280    270</span></span></code></pre></div>
<p>Leave as is:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sex_clean <span class="op">=</span> <span class="va">sex</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_lower</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">open_census_</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="healthcare-info">Healthcare Info<a class="anchor" aria-label="anchor" href="#healthcare-info"></a>
</h4>
<p>This one is a bit more complicated. We have a number of columns for
healthcare.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">prior_health_care</span><span class="op">:</span><span class="va">deathyear</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  prior_health_care              prior_diagnosis   other_prior_diagnosis</span></span>
<span><span class="co">#&gt;  No  :163          Malaria              : 34    999          :  8      </span></span>
<span><span class="co">#&gt;  Yes : 73          Prior diagnosis other: 21    Solopiso     :  6      </span></span>
<span><span class="co">#&gt;  NA's:314          Hypertension         : 13    Aretintsofina:  2      </span></span>
<span><span class="co">#&gt;                    No pregnancy         :  5    Farasisa     :  2      </span></span>
<span><span class="co">#&gt;                    Idr                  :  2    Hernie       :  2      </span></span>
<span><span class="co">#&gt;                    (Other)              :  8    (Other)      : 16      </span></span>
<span><span class="co">#&gt;                    NA's                 :467    NA's         :514      </span></span>
<span><span class="co">#&gt;      visual_health_deformities          other_visual_health_deformities</span></span>
<span><span class="co">#&gt;  Deformities na   :226         Balana                   :  1           </span></span>
<span><span class="co">#&gt;  Missing teeth    :  6         Kondohalitry, moa        :  1           </span></span>
<span><span class="co">#&gt;  Other deformities:  4         Malemy tongotra sy tanana:  1           </span></span>
<span><span class="co">#&gt;  Club foot        :  2         Simba maso ilany         :  1           </span></span>
<span><span class="co">#&gt;  Albinism         :  1         Tongotra                 :  1           </span></span>
<span><span class="co">#&gt;  (Other)          :  2         NA's                     :545           </span></span>
<span><span class="co">#&gt;  NA's             :309                                                 </span></span>
<span><span class="co">#&gt;  surgeries                          prior_surgeries vaccine_card</span></span>
<span><span class="co">#&gt;  -  :314   &amp;                                :  1    Idk: 17     </span></span>
<span><span class="co">#&gt;  No :227   Nanala aretina apandisite        :  1    No :377     </span></span>
<span><span class="co">#&gt;  Yes:  9   Niterak nodidiana                :  1    Yes:156     </span></span>
<span><span class="co">#&gt;            Niteraka zaza iray  dia nididiana:  1                </span></span>
<span><span class="co">#&gt;            Operation  maso                  :  1                </span></span>
<span><span class="co">#&gt;            (Other)                          :  7                </span></span>
<span><span class="co">#&gt;            NA's                             :538                </span></span>
<span><span class="co">#&gt;                            vaccination_history   vaccine_other pregnant  </span></span>
<span><span class="co">#&gt;  Measles polio                       :165      -        :314   No  : 98  </span></span>
<span><span class="co">#&gt;  Vacc idr                            :144      Tsy  misy:  3   Yes :132  </span></span>
<span><span class="co">#&gt;  Polio dtc1 dtc2 dtc3 measles        : 42      Tsy nisy :  1   NA's:320  </span></span>
<span><span class="co">#&gt;  Polio dtc1 dtc2 dtc3 measles tetanus: 28      NA's     :232             </span></span>
<span><span class="co">#&gt;  Polio                               :  6                                </span></span>
<span><span class="co">#&gt;  (Other)                             : 23                                </span></span>
<span><span class="co">#&gt;  NA's                                :142                                </span></span>
<span><span class="co">#&gt;   pregnancies  number_deliveries number_live_births            birthweight </span></span>
<span><span class="co">#&gt;  2      : 31   1      : 31       1      : 35        Birth weight gram: 48  </span></span>
<span><span class="co">#&gt;  1      : 28   2      : 28       2      : 28        Birthweight na   :322  </span></span>
<span><span class="co">#&gt;  3      : 22   3      : 22       3      : 20        NA's             :180  </span></span>
<span><span class="co">#&gt;  4      : 12   4      : 12       4      : 14                               </span></span>
<span><span class="co">#&gt;  5      : 11   5      : 11       5      : 13                               </span></span>
<span><span class="co">#&gt;  (Other): 28   (Other): 27       (Other): 20                               </span></span>
<span><span class="co">#&gt;  NA's   :418   NA's   :419       NA's   :420                               </span></span>
<span><span class="co">#&gt;  birthweight_gram is_person_alive cause_of_death date_of_death death_date</span></span>
<span><span class="co">#&gt;  3000   : 10      Yes:550         NA's:550       NA's:550      NA's:550  </span></span>
<span><span class="co">#&gt;  2500   :  6                                                             </span></span>
<span><span class="co">#&gt;  2800   :  5                                                             </span></span>
<span><span class="co">#&gt;  2000   :  4                                                             </span></span>
<span><span class="co">#&gt;  3500   :  4                                                             </span></span>
<span><span class="co">#&gt;  (Other): 19                                                             </span></span>
<span><span class="co">#&gt;  NA's   :502                                                             </span></span>
<span><span class="co">#&gt;  deathmonth deathyear </span></span>
<span><span class="co">#&gt;  -   :314   -   :314  </span></span>
<span><span class="co">#&gt;  NA's:236   NA's:236  </span></span>
<span><span class="co">#&gt;                       </span></span>
<span><span class="co">#&gt;                       </span></span>
<span><span class="co">#&gt;                       </span></span>
<span><span class="co">#&gt;                       </span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>To be honest, I think that healthcare should be in a separate table
in our outputs. It seems to sparse and complex to be useful in the main
table.</p>
<p>So with that, let’s summarize what we have so far:</p>
</div>
</div>
<div class="section level3">
<h3 id="pipeline-summary">Pipeline Summary<a class="anchor" aria-label="anchor" href="#pipeline-summary"></a>
</h3>
<p>In this notebook, we have investigated the data and taken the
following steps to harmonize the cohort from the OpenSRP_2018 baseline
file “Open Census”:</p>
<ul>
<li>Cleaned the column names with <code>janitor</code>
</li>
<li>Found that <code>antaravato</code> is a village in Madagascar
represented by the user ID column</li>
<li>Recognized that the hierarchical units of measure are individual,
household, and village</li>
<li>Therefore, it’s important to recognize the difference and
significance of the family member name and their corresponding household
head name</li>
<li>Found the date of birth and cleaned it up with a custom function,
estimating the DoB where there wasn’t clear data available.</li>
<li>Cleaned the education and profession information</li>
<li>Cleaned Sex and marital status</li>
</ul>
<p>Here’s a visual summary using our
<code>audit_categorical_cleaning</code> function:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/audit_categorical_cleaning.html">audit_categorical_cleaning</a></span><span class="op">(</span></span>
<span>    raw_col <span class="op">=</span> <span class="va">hh_head_name</span>,</span>
<span>    cleaned_col <span class="op">=</span> <span class="va">hh_head_name_clean</span>,</span>
<span>    var_name <span class="op">=</span> <span class="st">"Household Head Name"</span>, plot <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Mapping Table for: Household Head Name ===</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 134 × 3</span></span></span>
<span><span class="co">#&gt;    raw              cleaned              n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Be zela          be zela             10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Bezafy romain    bezafy romain        9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Bilina victor    bilina victor        9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Tsidinesana      tsidinesana          9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Clerien          clerien              8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Eddy             eddy                 8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Rakoto elois     rakoto elois         8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Daniel tsaramaro daniel tsaramaro     7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Derisy           derisy               7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Pierreson        pierreson            7</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 124 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/audit_categorical_cleaning.html">audit_categorical_cleaning</a></span><span class="op">(</span></span>
<span>    raw_col <span class="op">=</span> <span class="va">profession</span>,</span>
<span>    cleaned_col <span class="op">=</span> <span class="va">profession_clean</span>,</span>
<span>    var_name <span class="op">=</span> <span class="st">"Profession"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Mapping Table for: Profession ===</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   raw         cleaned        n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Occupation  farmer       307</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Occupation  student      127</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Too young   <span style="color: #BB0000;">NA</span>            84</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Not working <span style="color: #BB0000;">NA</span>            29</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Occupation  teacher        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Occupation  shop owner     1</span></span></code></pre></div>
<p><img src="cohort-2018-preprocessing_files/figure-html/unnamed-chunk-37-1.png" width="700"></p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">open_census_</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/audit_categorical_cleaning.html">audit_categorical_cleaning</a></span><span class="op">(</span></span>
<span>    raw_col <span class="op">=</span> <span class="va">education</span>,</span>
<span>    cleaned_col <span class="op">=</span> <span class="va">education_level_clean</span>,</span>
<span>    var_name <span class="op">=</span> <span class="st">"Education"</span>, plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Mapping Table for: Education ===</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   raw        cleaned                 n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Epp        primary               278</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Ceg        lower_secondary       133</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> None       no_formal_education   122</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Lycee      upper_secondary        16</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> University higher_education        1</span></span></code></pre></div>
<p><img src="cohort-2018-preprocessing_files/figure-html/unnamed-chunk-38-1.png" width="700"></p>
<p>We can wrap that up in the <code><a href="../reference/preprocess_opensrp2018.html">preprocess_opensrp2018()</a></code>
function.</p>
<div class="section level4">
<h4 id="generating-unique-ids">Generating Unique IDs<a class="anchor" aria-label="anchor" href="#generating-unique-ids"></a>
</h4>
<p>As a final step, we’re also going to generate the UUID for each
individual. This is important for the final output, as we will be using
this to merge with the other datasets. The previous method of creating a
UUID was to paste a few variables, but this is not ideal as it can lead
to duplicates as well as security issues. To ensure security, we’ll use
the <code>digest</code> package and a secure <a href="https://en.wikipedia.org/wiki/Salt_(cryptography)" class="external-link">salt</a>. The
salt will be stored in the R environment as a secret variable.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_uid.html">generate_uid</a></span><span class="op">(</span>salt <span class="op">=</span> <span class="st">"cohort_secret"</span>, <span class="st">"John"</span>, <span class="st">"Doe"</span>, <span class="st">"1990-01-01"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "051bd1"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="duplicate-hhs-named-eddy">Duplicate HHs Named Eddy<a class="anchor" aria-label="anchor" href="#duplicate-hhs-named-eddy"></a>
</h4>
<p>There is a case where there are two households heads with the same
name <code>Eddy</code>. After examining these, we determined that they
can be separated by the date that they were registered. We will
therefore denote them numeric suffixes (I) and (II), and have this also
reflect in their respective Head of Household registration table. This
strategy may not work for all future cases, but for now, it is a good
solution for these two individuals.</p>
</div>
<div class="section level4">
<h4 id="pipeline-step-excution-preprocess_opensrp_2018">Pipeline Step Excution: preprocess_opensrp_2018<a class="anchor" aria-label="anchor" href="#pipeline-step-excution-preprocess_opensrp_2018"></a>
</h4>
<p>The final function will take the Open Census data and run it through
the pipeline we have created.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/preprocess_opensrp2018.html">preprocess_opensrp2018</a></span><span class="op">(</span><span class="va">open_census</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: There was 1 warning in `mutate()`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `dob_clean = `%&gt;%`(...)`.</span></span>
<span><span class="co">#&gt; Caused by warning:</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span>  7 failed to parse.</span></span>
<span><span class="co">#&gt;      uuid             village          hh_head_name           name          </span></span>
<span><span class="co">#&gt;  Length:550         Length:550         Length:550         Length:550        </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;                                                                             </span></span>
<span><span class="co">#&gt;       dob                       ethnicity              education_level</span></span>
<span><span class="co">#&gt;  Min.   :1930-12-24   betsimisaraka  :526   no_formal_education:122   </span></span>
<span><span class="co">#&gt;  1st Qu.:1984-01-01   tsimihety      : 10   primary            :278   </span></span>
<span><span class="co">#&gt;  Median :1998-10-26   metisy betsileo:  1   lower_secondary    :133   </span></span>
<span><span class="co">#&gt;  Mean   :1994-10-05   betsileo       : 12   upper_secondary    : 16   </span></span>
<span><span class="co">#&gt;  3rd Qu.:2008-12-20   sihanaka       :  1   higher_education   :  1   </span></span>
<span><span class="co">#&gt;  Max.   :2018-05-05                                                   </span></span>
<span><span class="co">#&gt;  NA's   :7                                                            </span></span>
<span><span class="co">#&gt;       employment_status      profession   marital_status     sex     </span></span>
<span><span class="co">#&gt;  employed      :437     farmer    :307   single  :299    female:280  </span></span>
<span><span class="co">#&gt;  inactive      : 29     shop owner:  1   married :241    male  :270  </span></span>
<span><span class="co">#&gt;  not applicable: 84     student   :127   divorced:  3                </span></span>
<span><span class="co">#&gt;                         teacher   :  2   widowed :  7                </span></span>
<span><span class="co">#&gt;                         NA's      :113                               </span></span>
<span><span class="co">#&gt;                                                                      </span></span>
<span><span class="co">#&gt;                                                                      </span></span>
<span><span class="co">#&gt;  submission_date     </span></span>
<span><span class="co">#&gt;  Min.   :2017-07-25  </span></span>
<span><span class="co">#&gt;  1st Qu.:2017-07-31  </span></span>
<span><span class="co">#&gt;  Median :2017-08-02  </span></span>
<span><span class="co">#&gt;  Mean   :2017-10-16  </span></span>
<span><span class="co">#&gt;  3rd Qu.:2018-01-17  </span></span>
<span><span class="co">#&gt;  Max.   :2018-05-12  </span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tinashe Tapera.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
